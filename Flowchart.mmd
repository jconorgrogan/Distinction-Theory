flowchart TD
    %% ───────── 0 · Starting datum ─────────
    F0["F0  Registered Contrast<br/>(difference noticed)"]

    %% ───────── 1 · Immediate necessities ─────────
    subgraph N0["Global necessities (true in every continuation)"]
        M1["Multiplicity (≥2 poles)"]
        P1["Trace persistence"]
        O1["Minimal ordering (unmarked→marked)"]
        L0["Proto-logic (Id,¬Contrad.)"]
        R0["Finite action (per-cycle resources)"]
    end
    F0 --> N0

    %% ───────── 2 · Global‐structure branch ─────────
    F0 --> B0{"Global structure of reality"}
    B0 --> S0["S₀ (no differences)"] -.-> X0["⊗ Contradicts F0"]
    B0 --> OMEGA["Ω (all differences)"] -.-> X1["⊗ Violates stable reference"]
    B0 --> C0["C (constrained differences)"]

    %% ───────── 3 · Necessity inside C ─────────
    C0 --> FRS["FRS  Finite Reachable Set"]

    %% ───────── 4 · Internal dynamics branch ─────────
    FRS --> DYN{"Internal dynamics?"}
    DYN --> STAT["Static system"]
    DYN --> DYNyes["Dynamic system"]

    %% Static terminates
    STAT -.-> ZS["(No saturation, no SUR)"]

    %% ───────── 5 · Novelty branch ─────────
    DYNyes --> NOVEL{"Sufficient novelty?"}
    NOVEL --> LOWNOV["Insufficient novelty"] -.-> ZN["(Within FRS, no L5)"]
    NOVEL --> SATRISK["L5  Saturation risk"]

    %% ───────── 6 · Cost necessity ─────────
    SATRISK --> COST["C1 + RCR (non-zero operation cost)"]

    %% ───────── 7 · Persistence branch ─────────
    COST --> PERS{"Persistence objective?"}
    PERS --> HALT["No PO  → halt/fail"] -.-> ZH["(terminates)"]
    PERS --> YESPO["Yes PO"]

    %% ───────── 8 · Forced optimisation ─────────
    YESPO --> SUR["SUR  (minimise L = K + λE)"]

    %% ───────── 9 · Final class ─────────
    SUR --> FINAL["SUR-systems<br/>(cost-optimising, logical)"]

    %% Styling
    classDef final fill:#e1f5fe,stroke:#0277bd,stroke-width:2px;
    class FINAL final
    classDef dead fill:#ffe0e0,stroke:#d32f2f,stroke-width:1px,stroke-dasharray: 4 2;
    class X0,X1,ZS,ZN,ZH dead
